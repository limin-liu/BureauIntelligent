
/*database set up */


drop database if exists bureau;
create database bureau;
use bureau;


CREATE TABLE DHT22 (
   id INT NOT NULL AUTO_INCREMENT,
   date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
   temperature FLOAT NOT NULL,
   humidite FLOAT NOT NULL,
   PRIMARY KEY (id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE CO (
	id INT NOT NULL AUTO_INCREMENT,
	date timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	co int(11) NOT NULL,
	PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE DUST (
	id INT NOT NULL AUTO_INCREMENT,
	date timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	air int(11) NOT NULL,
	PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE USER ( 
	userid VARCHAR(32) UNIQUE NOT NULL , 
	username VARCHAR(32) NOT NULL , 
	password VARCHAR(16) NOT NULL ,
	PRIMARY KEY (userid)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE FEEDBACK ( 
	id INT NOT NULL AUTO_INCREMENT,
	date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	email VARCHAR(32) NOT NULL , 
	subject VARCHAR(32) NOT NULL , 
	message TEXT NOT NULL ,
	PRIMARY KEY (id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

/* database initialization */


INSERT INTO DHT22 (date, temperature,humidite) VALUES
('2016-11-08 23:00:00', 27,47),
('2016-11-15 23:00:00', 24,44),
('2016-11-14 23:00:00', 27,47),
('2016-11-18 23:00:00', 26,56),
('2016-11-12 23:00:00', 21,47),
('2016-11-17 23:00:00', 22,42),
('2016-11-19 23:00:00', 26,46),
('2016-11-22 23:00:00', 23,53),
('2016-11-26 23:00:00', 25,45);

SELECT * FROM DHT22 ORDER BY date DESC;


INSERT INTO DUST (date, air) VALUES
('2016-11-08 23:00:00', 97),
('2016-11-15 23:00:00', 94),
('2016-11-14 23:00:00', 87);

SELECT * FROM DUST ORDER BY date DESC;


INSERT INTO CO (date, co) VALUES
('2016-11-08 23:00:00', 300),
('2016-11-15 23:00:00', 500),
('2016-11-14 23:00:00', 800);

SELECT * FROM CO ORDER BY date DESC;


INSERT INTO USER (userid, username,password) VALUES
('test', 'BItest','test');

SELECT * FROM USER;